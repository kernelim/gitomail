<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Dan Aloni">
  
  <title>Configuration - Gitomail</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Configuration";
    var mkdocs_page_input_path = "config.md";
    var mkdocs_page_url = "/config/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Gitomail</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../ChangeLog/">Changelog</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Documentation</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../install/">Installation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../execution/">Execution</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Configuration</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#configuration">Configuration</a></li>
                
                    <li><a class="toctree-l4" href="#file-lookup">File lookup</a></li>
                
                    <li><a class="toctree-l4" href="#values-general">Values (general)</a></li>
                
                    <li><a class="toctree-l4" href="#values-email-generation">Values (Email generation)</a></li>
                
                    <li><a class="toctree-l4" href="#values-smtp-related">Values (SMTP related)</a></li>
                
                    <li><a class="toctree-l4" href="#values-jira-integration">Values (JIRA integration)</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../maintainers-spec/">Specifying Maintainers</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../similar-commits/">Similar Commits Detection</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../gmail/">Recommended Gmail filters</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Gitomail</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Documentation &raquo;</li>
        
      
    
    <li>Configuration</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/kernelim/gitomail/tree/master/doc" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">&para;</a></h1>
<p>Gitomail receives configuration via one or more YAML formatted files, using a scheme described here.</p>
<h2 id="file-lookup">File lookup<a class="headerlink" href="#file-lookup" title="Permanent link">&para;</a></h2>
<p>Configuration files are loaded in this order:</p>
<ul>
<li>If exists - <code>~/.gitomailconf.yaml</code></li>
<li>If exists - <code>$GIT_DIR/gitomailconf.yaml</code> (where <code>GIT_DIR</code> is the current Git's repo meta directory)</li>
<li>Configuration files passed via the command line option <code>-c</code>.</li>
</ul>
<p>Later files override values that were set by former files.</p>
<h2 id="values-general">Values (general)<a class="headerlink" href="#values-general" title="Permanent link">&para;</a></h2>
<h3 id="repo-name">repo-name<a class="headerlink" href="#repo-name" title="Permanent link">&para;</a></h3>
<p>If not guessed from working directory or passed from command line, this setting
can provide the repository name to be used when sending emails and formatting links.</p>
<p>For example:</p>
<pre><code class="no-highlight">repo-name: someproject
</code></pre>

<h3 id="exclude-refs">exclude-refs<a class="headerlink" href="#exclude-refs" title="Permanent link">&para;</a></h3>
<p>List of regular expressions that match refs to exclude from monitoring.</p>
<p>For example:</p>
<pre><code class="no-highlight">exclude-refs:
- .*/_.*
</code></pre>

<p>This would exclude all refs that include the <code>_/</code> substring.</p>
<h3 id="include-refs">include-refs<a class="headerlink" href="#include-refs" title="Permanent link">&para;</a></h3>
<p>If provided, will only monitor refs that matches at least one of the references
provided, and as long as they do match any of the regexes in <code>exclude-refs</code>.</p>
<p>For example:</p>
<pre><code class="no-highlight">include-refs:
- heads/review/.*
exclude-refs:
- .*/_.*
</code></pre>

<p>This would include only refs that start with <code>review/</code> and among them
exclude all refs that include the <code>_/</code> substring.</p>
<h3 id="root-refs">root-refs<a class="headerlink" href="#root-refs" title="Permanent link">&para;</a></h3>
<p>This setting is a list of regexes that determine the relationship between refs.
Earlier ones will be traversed before later ones. It defaults to the following setting:</p>
<pre><code class="no-highlight">root-refs:
- tags/.*
- heads/master
</code></pre>

<p>This is needed because Gitomail cannot guess which branch diverged from which branch,
and while it's only a convention that branches diverge from <code>master</code>, there could be
other branches such as <code>release-x.y.z</code> from which people diverge (in that case, it
would be fitting to put <code>heads/release-.*</code> after <code>heads/master</code>.</p>
<h2 id="values-email-generation">Values (Email generation)<a class="headerlink" href="#values-email-generation" title="Permanent link">&para;</a></h2>
<h3 id="commit-url">commit-url<a class="headerlink" href="#commit-url" title="Permanent link">&para;</a></h3>
<p>Per commit sent or mentioned, Gitomail can create hyperlinks to a Web-based repository
browser in the email, and this setting is the formating string for such links, where:</p>
<ul>
<li><code>%r</code> - name of the repository</li>
<li><code>%H</code> - full commit hash</li>
</ul>
<p>For example:</p>
<pre><code class="no-highlight">commit-url: https://github.com/kernelim/%r/commit/%H
</code></pre>

<h3 id="blob-in-commit-url">blob-in-commit-url<a class="headerlink" href="#blob-in-commit-url" title="Permanent link">&para;</a></h3>
<p>In diffs, this optional field can help to create hyperlinks from the filenames presented
in the meta-data to their full version. This setting is the formating string for such links,
where:</p>
<ul>
<li><code>%r</code> - name of the repository</li>
<li><code>%H</code> - full commit hash</li>
<li><code>%f</code> - filename in tree</li>
</ul>
<p>For example:</p>
<pre><code class="no-highlight">blob-in-commit-url: https://github.com/kernelim/%r/blob/%H/%f
</code></pre>

<h3 id="from-email">from-email<a class="headerlink" href="#from-email" title="Permanent link">&para;</a></h3>
<p>The fully formed email address to put in the <code>Form:</code> email field.</p>
<p>For example:</p>
<pre><code class="no-highlight">from-email: Gitomail &lt;osiris@aloni.org&gt;
</code></pre>

<h3 id="filtered-email-destinations">filtered-email-destinations<a class="headerlink" href="#filtered-email-destinations" title="Permanent link">&para;</a></h3>
<p>Default: empty</p>
<p>These are a list of email addresses (e.g. <code>a@b.c</code>) to which never to send emails, even
if they appear as maintainers.</p>
<h3 id="source-highlight">source-highlight<a class="headerlink" href="#source-highlight" title="Permanent link">&para;</a></h3>
<p>Default: True</p>
<p>A boolean which specifies whether to preform syntax highlighting.</p>
<h3 id="commit-subject-line">commit-subject-line<a class="headerlink" href="#commit-subject-line" title="Permanent link">&para;</a></h3>
<p>Default (below):</p>
<pre><code>commit-subject-line: [%r %b %h%n] %s
</code></pre>

<p>Format string for the per-commit subject line.</p>
<h3 id="summary-subject-line">summary-subject-line<a class="headerlink" href="#summary-subject-line" title="Permanent link">&para;</a></h3>
<p>Default (below):</p>
<pre><code>default_subject_line: [%r] %s
</code></pre>

<p>Format string for the summary email subject line.</p>
<h2 id="values-smtp-related">Values (SMTP related)<a class="headerlink" href="#values-smtp-related" title="Permanent link">&para;</a></h2>
<h3 id="smtp-hostname">smtp-hostname<a class="headerlink" href="#smtp-hostname" title="Permanent link">&para;</a></h3>
<p>SMTP hostname for sending mails.</p>
<h3 id="smtp-port">smtp-port<a class="headerlink" href="#smtp-port" title="Permanent link">&para;</a></h3>
<p>SMTP port for sending mails, defaults to 587.</p>
<h3 id="smtp-starttls">smtp-starttls<a class="headerlink" href="#smtp-starttls" title="Permanent link">&para;</a></h3>
<p>Whether to enable TLS - defaults to True.</p>
<h3 id="smtp-username">smtp-username<a class="headerlink" href="#smtp-username" title="Permanent link">&para;</a></h3>
<p>SMTP username for sending mails.</p>
<h3 id="smtp-password">smtp-password<a class="headerlink" href="#smtp-password" title="Permanent link">&para;</a></h3>
<p>SMTP password for sending mails.</p>
<p><strong>Example Gmail configuration</strong></p>
<p>A configuration for Gmail or 'Google for Domains' can be based on the following template:</p>
<pre><code class="no-highlight">smtp-hostname: smtp.gmail.com
smtp-starttls: true
smtp-username: example-user@gmail.com
smtp-password: example-password
from-email: Example User &lt;example-user@gmail.com&gt;
</code></pre>

<h2 id="values-jira-integration">Values (JIRA integration)<a class="headerlink" href="#values-jira-integration" title="Permanent link">&para;</a></h2>
<p>The following fields allow to optionally activate support for JIRA integration.</p>
<h3 id="issue-track-match">issue-track-match<a class="headerlink" href="#issue-track-match" title="Permanent link">&para;</a></h3>
<p>This field describes a regex that matches strings that link to issues. The inner
most parenthesis is the part of the match that will receive the hyperlink.</p>
<p>For example:</p>
<pre><code class="no-highlight">issue-track-match: '[[]((PROJECT|OTHER|ISSUE)-[0-9]+)[]]'
</code></pre>

<p>With this matcher, <code>[PROJECT-123]</code> will match, and the substring <code>PROJECT-123</code>
will get hyperlinked. Plus, that substring is used for the <code>jira-cc</code> field,
and <code>issue-track-url</code> fields, later on.</p>
<h3 id="issue-track-url">issue-track-url<a class="headerlink" href="#issue-track-url" title="Permanent link">&para;</a></h3>
<p>This field describes the hyperlink to generate for each issue mention in the
commit message.</p>
<p>For example:</p>
<pre><code class="no-highlight">issue-track-url: https://somefakeproject.com/browse/%s
</code></pre>

<h3 id="jira-cc">jira-cc<a class="headerlink" href="#jira-cc" title="Permanent link">&para;</a></h3>
<p>This field can specify a JIRA server and authentication credentials, from which
Gitomail would automatically fetch data concerning issues mentioned in commits. The
meta-data used from these issues can specify additional people to address when
automatically sending the emails.</p>
<p>For example:</p>
<pre><code class="no-highlight">jira-cc:
  url: https://somecompany.atlassian.net/rest/api/2/issue/%s
  http_creds: 'username:password'
  fields:
  - customfield_10300
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../maintainers-spec/" class="btn btn-neutral float-right" title="Specifying Maintainers">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../execution/" class="btn btn-neutral" title="Execution"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright (c) 2015-2016, Dan Aloni</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/kernelim/gitomail/tree/master/doc" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../execution/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../maintainers-spec/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
